From 748b744594dbbdc0ec52149c2b6c4b3aca0a22c4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Thu, 18 Feb 2016 18:12:43 +0100
Subject: [PATCH 20/60] qt4: input_manager: Always reset lastURI when stopping
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This allow the resume where you left off feature to kick in when
starting the playback again, but not when cycling through a playlist
refs #11704

(cherry picked from commit 285a3efcbb4f64ea4d9812d1f94605cef7c65083)
Signed-off-by: Hugo Beauz√©e-Luyssen <hugo@beauzee.fr>
---
 modules/gui/qt4/input_manager.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/modules/gui/qt4/input_manager.cpp b/modules/gui/qt4/input_manager.cpp
index 6734bfd..89f8ba4 100644
--- a/modules/gui/qt4/input_manager.cpp
+++ b/modules/gui/qt4/input_manager.cpp
@@ -157,6 +157,7 @@ void InputManager::setInput( input_thread_t *_p_input )
     else
     {
         p_item = NULL;
+        lastURI.clear();
         assert( !p_input_vbi );
         emit rateChanged( var_InheritFloat( p_intf, "rate" ) );
     }
@@ -1122,7 +1123,6 @@ void MainInputManager::probeCurrentInput()
 void MainInputManager::stop()
 {
    playlist_Stop( THEPL );
-   getIM()->lastURI.clear();
 }
 
 void MainInputManager::next()
-- 
2.7.0

